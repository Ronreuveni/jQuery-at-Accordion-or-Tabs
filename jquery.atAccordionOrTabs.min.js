(function(a){a.fn.accordionortabs=function(b){var e=a.extend({defaultOpened:0,containerBreakPoint:0,tabsIfPossible:true,hashbangPrefix:"tabset_",centerTabs:false},b);startingOuterWidth=a(window).width();is_iOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);function f(g,i,h){h=(typeof h==="undefined")?false:h;g.addClass("at-tabs");tabs_width=0;a("> li > a",g).each(function(j){tabs_width=tabs_width+a(this).outerWidth(true)+5;if(j==0&&e.centerTabs===true){tabs_width=tabs_width-a(this).css("margin-left").replace(/[^-\d\.]/g,"")}if(j==a(this).closest(".at-accordion-or-tabs").find("> li > a").length-1){largest_tab_widths[i]=tabs_width+15;if(h===false){d()}}})}function c(g,h){skip_fix_accordion_or_tabs_function=(typeof skip_fix_accordion_or_tabs_function==="undefined")?false:skip_fix_accordion_or_tabs_function;g.addClass("at-tabs");$first_tab_width=a("> li > a",g).eq(0).outerWidth(true);if(typeof first_tab_widths[h]=="undefined"){first_tab_widths[h]=$first_tab_width}else{if($first_tab_width!=first_tab_widths[h]){first_tab_widths[h]=$first_tab_width;f(g,h,true)}}}function d(){if(a(".at-accordion-or-tabs.at-tabs-when-possible").length){a(".bbq.at-accordion-or-tabs.at-tabs-when-possible").each(function(h){tabs_when_possible_index=h;if(a(this).attr("data-rtContainerBreakPoint")){rt_user_defined_container_breakpoint=a(this).attr("data-rtContainerBreakPoint")}else{rt_user_defined_container_breakpoint=e.containerBreakPoint}c(a(this),tabs_when_possible_index);if(largest_tab_widths[h]>a(this).width()||rt_user_defined_container_breakpoint>=a(this).width()){if(e.centerTabs===true){a(this).find(">li>a").eq(0).css("margin-left","")}a(this).removeClass("at-tabs");var g=a.bbq.getState(a(this).attr("data-tabset-id"),true)||0;if(g==0){a(this).addClass("at-accordion-closed").find(">li>a").eq(0).removeClass("active").next("section").removeClass("is-open").hide()}}else{if(e.centerTabs===true){a(this).find(">li>a").eq(0).css("margin-left",(a(this).outerWidth(true)-largest_tab_widths[h])/2+10)}if(a(this).hasClass("at-accordion-closed")){a(this).removeClass("at-accordion-closed").find(">li>a").eq(0).addClass("active").next("section").addClass("is-open").show().focus();f(a(this),tabs_when_possible_index)}}})}}if(e.tabsIfPossible==true){this.addClass("at-tabs-when-possible")}this.find(">li>section").attr("aria-live","assertive");if(e.defaultOpened!=0){this.each(function(g){if(e.defaultOpened<=a(this).find(">li").length){a(this).attr("data-default-opened",e.defaultOpened)}})}this.addClass("bbq clearfix at-accordion-or-tabs").find(">li>a").prepend('<span class="at-tab-one-pixel-fix-left"></span><span class="at-tab-one-pixel-fix-right"></span>');this.each(function(g){a(this).attr("data-tabset-id",e.hashbangPrefix+g);a(this).find(">li>a").each(function(h){a(this).attr("href","!#"+e.hashbangPrefix+g+"="+h);a(this).next("section").prepend('<h1 class="aria-only">'+a(this).text()+"</h1>")})});a(document).ready(function(){a.param.fragment.ajaxCrawlable(true);largest_tab_widths=new Array();first_tab_widths=new Array();a(".bbq.at-accordion-or-tabs.at-tabs-when-possible").each(function(g){c(a(this),g);f(a(this),g)});a(".bbq.at-accordion-or-tabs").each(function(h){var j=a.bbq.getState(a(this).attr("data-tabset-id"),true)||0;var g=a(this).attr("data-default-opened");if(j==0&&g!==undefined&&g!=""){var i={},k=a(this).attr("data-tabset-id");i[k]=g;a.bbq.pushState(i)}});a(".at-accordion-or-tabs").on("click","li > a",function(i){if(!a(this).hasClass("active")){var h={},j=a(this).closest(".bbq").attr("data-tabset-id"),g=a(this).parent().prevAll().length+1;h[j]=g;a.bbq.pushState(h)}else{if(!a(this).closest(".at-accordion-or-tabs").hasClass("at-tabs")){var j=a(this).closest(".bbq").attr("data-tabset-id");a.bbq.removeState(j)}}a(this).blur();i.preventDefault()});a(window).trigger("hashchange")});a(window).resize(function(){if(!is_iOS||(is_iOS&&(startingOuterWidth!==a(window).width()))){startingOuterWidth=a(window).width();d()}});a(window).on("hashchange",function(g){a(".bbq").each(function(){var h=a.bbq.getState(a(this).attr("data-tabset-id"),true)||0;if(h>0){if(!a(this).find(">li>a").eq(h-1).hasClass("active")){if(a(this).hasClass("at-tabs")){a(this).find(".is-open").removeClass("is-open").hide();a(this).find(">li>section").eq(h-1).toggleClass("is-open").toggle()}else{a(this).find(".is-open").removeClass("is-open").slideToggle();a(this).find(">li>section").eq(h-1).toggleClass("is-open").slideToggle()}a(this).find(".active").removeClass("active");a(this).find(">li>a").eq(h-1).addClass("active").blur()}a(this).removeClass("at-accordion-closed")}else{if(a(this).hasClass("at-accordion-or-tabs")&&(!a(this).hasClass("at-tabs"))){a(this).addClass("at-accordion-closed").find(">li>a.active").removeClass("active").next("section").removeClass("is-open").slideUp()}else{if(a(this).hasClass("at-accordion-or-tabs")&&(a(this).hasClass("at-tabs")&&!a(this).hasClass("at-accordion-closed"))){a(this).addClass("at-accordion-closed").find(">li>a.active").removeClass("active").next("section").removeClass("is-open").hide();a(this).children("li").first().children("a").addClass("active").next("section").addClass("is-open").show()}}}})});return this}}(jQuery));